2022-11-29 16:29:24.541 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:29:26.188 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:29:26.201 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 1697.7204ms
2022-11-29 16:29:26.238 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 44.8901ms
2022-11-29 16:29:26.315 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:29:26.635 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 319.7943ms
2022-11-29 16:29:26.941 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:29:26.950 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/favicon-32x32.png - -
2022-11-29 16:29:26.966 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-11-29 16:29:26.970 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/favicon-32x32.png - - - 200 628 image/png 19.5107ms
2022-11-29 16:29:27.415 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 473.5960ms
2022-11-29 16:31:20.335 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:31:20.825 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 494.4696ms
2022-11-29 16:31:20.862 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:31:20.862 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:31:20.887 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 17.8027ms
2022-11-29 16:31:20.961 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 99.1260ms
2022-11-29 16:31:21.060 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:31:21.482 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 421.6676ms
2022-11-29 16:31:28.573 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Sber/order/new application/json 3637
2022-11-29 16:31:28.884 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "Basic dXNlclRlc3Q6dGVzdHBhcw=="
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3637"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "44fa59a8-8b07-485b-bccd-7cb67bfb6514"
  ]
}
2022-11-29 16:31:28.924 +04:00 [INF] Body: {
  "data": {
    "merchantId": 5046,
    "shipments": [
      {
        "shipmentId": "946032220",
        "shipmentDate": "2022-11-17T09:34:03+03:00",
        "items": [
          {
            "itemIndex": "1",
            "goodsId": "100023763738",
            "offerId": "K00039283",
            "itemName": "Вертикальный пылесос Kitfort  KT-535-2 White",
            "price": 11990,
            "finalPrice": 5995,
            "discounts": [
              {
                "discountType": "BPG20",
                "discountDescription": "BPG20",
                "discountAmount": 1424
              },
              {
                "discountType": "LOY",
                "discountDescription": "Скидка БР",
                "discountAmount": 4571
              }
            ],
            "quantity": 1,
            "taxRate": "20",
            "reservationPerformed": true,
            "isDigitalMarkRequired": false
          },
          {
            "itemIndex": "2",
            "goodsId": "100023763738",
            "offerId": "D00071390",
            "itemName": "Вертикальный пылесос Kitfort  KT-535-2 White",
            "price": 11990,
            "finalPrice": 5995,
            "discounts": [
              {
                "discountType": "BPG20",
                "discountDescription": "BPG20",
                "discountAmount": 1424
              },
              {
                "discountType": "LOY",
                "discountDescription": "Скидка БР",
                "discountAmount": 4571
              }
            ],
            "quantity": 1,
            "taxRate": "20",
            "reservationPerformed": true,
            "isDigitalMarkRequired": false
          },
          {
            "itemIndex": "1",
            "goodsId": "100023763738",
            "offerId": "D00071390",
            "itemName": "Вертикальный пылесос Kitfort  KT-535-2 White",
            "price": 11990,
            "finalPrice": 5995,
            "discounts": [
              {
                "discountType": "BPG20",
                "discountDescription": "BPG20",
                "discountAmount": 1424
              },
              {
                "discountType": "LOY",
                "discountDescription": "Скидка БР",
                "discountAmount": 4571
              }
            ],
            "quantity": 1,
            "taxRate": "20",
            "reservationPerformed": true,
            "isDigitalMarkRequired": false
          }
        ],
        "label": {
          "deliveryId": "933021193",
          "region": "Воронежская",
          "city": "Воронеж",
          "address": "Россия, Воронежская обл.,  Воронеж, Проспект Губкина, 9",
          "fullName": "Петров Пётр",
          "merchantName": "ООО \"АЭРО-ТРЕЙД\"",
          "merchantId": 5046,
          "shipmentId": "956032218",
          "shippingDate": "2022-11-18T17:00:00+03:00",
          "deliveryType": "Самовывоз из пункта выдачи",
          "labelText": "<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\"/>\t\n    <title>Маркировочный лист</title>    ..."
        },
        "shipping": {
          "shippingDate": "2022-11-18T17:00:00+03:00",
          "shippingPoint": 132378
        },
        "fulfillmentMethod": "FULFILLMENT_BY_MERCHANT"
      }
    ]
  },
  "meta": {
    "source": "OMS"
  }
}
2022-11-29 16:31:28.927 +04:00 [INF] Host: localhost
2022-11-29 16:31:28.935 +04:00 [INF] Client IP: ::1
2022-11-29 16:31:28.942 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Sber/order/new application/json 3637 - 403 - - 369.3765ms
2022-11-29 16:31:54.806 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Sber/order/new application/json 3637
2022-11-29 16:31:54.815 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "Basic b25saW5lOiFfc3VwcG9ydF8hMg=="
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3637"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "44b5c0fe-205d-467d-86d2-7abf4258a65b"
  ]
}
2022-11-29 16:31:54.818 +04:00 [INF] Body: {
  "data": {
    "merchantId": 5046,
    "shipments": [
      {
        "shipmentId": "946032220",
        "shipmentDate": "2022-11-17T09:34:03+03:00",
        "items": [
          {
            "itemIndex": "1",
            "goodsId": "100023763738",
            "offerId": "K00039283",
            "itemName": "Вертикальный пылесос Kitfort  KT-535-2 White",
            "price": 11990,
            "finalPrice": 5995,
            "discounts": [
              {
                "discountType": "BPG20",
                "discountDescription": "BPG20",
                "discountAmount": 1424
              },
              {
                "discountType": "LOY",
                "discountDescription": "Скидка БР",
                "discountAmount": 4571
              }
            ],
            "quantity": 1,
            "taxRate": "20",
            "reservationPerformed": true,
            "isDigitalMarkRequired": false
          },
          {
            "itemIndex": "2",
            "goodsId": "100023763738",
            "offerId": "D00071390",
            "itemName": "Вертикальный пылесос Kitfort  KT-535-2 White",
            "price": 11990,
            "finalPrice": 5995,
            "discounts": [
              {
                "discountType": "BPG20",
                "discountDescription": "BPG20",
                "discountAmount": 1424
              },
              {
                "discountType": "LOY",
                "discountDescription": "Скидка БР",
                "discountAmount": 4571
              }
            ],
            "quantity": 1,
            "taxRate": "20",
            "reservationPerformed": true,
            "isDigitalMarkRequired": false
          },
          {
            "itemIndex": "1",
            "goodsId": "100023763738",
            "offerId": "D00071390",
            "itemName": "Вертикальный пылесос Kitfort  KT-535-2 White",
            "price": 11990,
            "finalPrice": 5995,
            "discounts": [
              {
                "discountType": "BPG20",
                "discountDescription": "BPG20",
                "discountAmount": 1424
              },
              {
                "discountType": "LOY",
                "discountDescription": "Скидка БР",
                "discountAmount": 4571
              }
            ],
            "quantity": 1,
            "taxRate": "20",
            "reservationPerformed": true,
            "isDigitalMarkRequired": false
          }
        ],
        "label": {
          "deliveryId": "933021193",
          "region": "Воронежская",
          "city": "Воронеж",
          "address": "Россия, Воронежская обл.,  Воронеж, Проспект Губкина, 9",
          "fullName": "Петров Пётр",
          "merchantName": "ООО \"АЭРО-ТРЕЙД\"",
          "merchantId": 5046,
          "shipmentId": "956032218",
          "shippingDate": "2022-11-18T17:00:00+03:00",
          "deliveryType": "Самовывоз из пункта выдачи",
          "labelText": "<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\"/>\t\n    <title>Маркировочный лист</title>    ..."
        },
        "shipping": {
          "shippingDate": "2022-11-18T17:00:00+03:00",
          "shippingPoint": 132378
        },
        "fulfillmentMethod": "FULFILLMENT_BY_MERCHANT"
      }
    ]
  },
  "meta": {
    "source": "OMS"
  }
}
2022-11-29 16:31:54.821 +04:00 [INF] Host: localhost
2022-11-29 16:31:54.824 +04:00 [INF] Client IP: ::1
2022-11-29 16:31:54.850 +04:00 [INF] Executing endpoint 'Market.Controllers.SberController.OrderAccept (Market)'
2022-11-29 16:31:54.889 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Sber"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[SberClasses.SberResponse]] OrderAccept(Market.Services.HeadersParameters, SberClasses.SberRequest, System.Threading.CancellationToken) on controller Market.Controllers.SberController (Market).
2022-11-29 16:32:05.554 +04:00 [INF] Executed action Market.Controllers.SberController.OrderAccept (Market) in 10656.9261ms
2022-11-29 16:32:05.735 +04:00 [INF] Executed endpoint 'Market.Controllers.SberController.OrderAccept (Market)'
2022-11-29 16:32:06.254 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удается открыть базу данных "Valentin", запрашиваемую именем входа. Не удалось выполнить вход.
Ошибка входа пользователя "User1C".
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d39b2451-39c1-4d8f-a52d-fc9d23bbc0a4
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at StinClasses.Справочники.MarketplaceEntity.ПолучитьMarketplaceByFirma(String authApi, String firmaId) in C:\Users\Валентин\source\repos\StinWeb\StinClasses\Справочники\Marketplace.cs:line 133
   at Market.Services.Bridge1C.NewOrder(String authorizationApi, String marketplaceName, String orderId, List`1 items, String regionName, String outletId, String orderDeliveryShipmentId, DateTime orderShipmentDate, Double deliveryPrice, Double deliverySubsidy, OrderRecipientAddress address, StinPaymentType orderPaymentType, StinPaymentMethod orderPaymentMethod, StinDeliveryPartnerType orderDeliveryPartnerType, StinDeliveryType orderDeliveryType, String orderDeliveryServiceId, String orderServiceName, String orderDeliveryRegionId, String orderDeliveryRegionName, String orderNotes, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Services\Bridge1C.cs:line 157
   at Market.Controllers.SberController.OrderAccept(HeadersParameters headers, SberRequest requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\SberController.cs:line 91
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 16:32:06.775 +04:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 16:32:07.110 +04:00 [ERR] Connection ID "18230571306091283326", Request ID "80000380-0003-fd00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удается открыть базу данных "Valentin", запрашиваемую именем входа. Не удалось выполнить вход.
Ошибка входа пользователя "User1C".
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d39b2451-39c1-4d8f-a52d-fc9d23bbc0a4
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at StinClasses.Справочники.MarketplaceEntity.ПолучитьMarketplaceByFirma(String authApi, String firmaId) in C:\Users\Валентин\source\repos\StinWeb\StinClasses\Справочники\Marketplace.cs:line 133
   at Market.Services.Bridge1C.NewOrder(String authorizationApi, String marketplaceName, String orderId, List`1 items, String regionName, String outletId, String orderDeliveryShipmentId, DateTime orderShipmentDate, Double deliveryPrice, Double deliverySubsidy, OrderRecipientAddress address, StinPaymentType orderPaymentType, StinPaymentMethod orderPaymentMethod, StinDeliveryPartnerType orderDeliveryPartnerType, StinDeliveryType orderDeliveryType, String orderDeliveryServiceId, String orderServiceName, String orderDeliveryRegionId, String orderDeliveryRegionName, String orderNotes, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Services\Bridge1C.cs:line 157
   at Market.Controllers.SberController.OrderAccept(HeadersParameters headers, SberRequest requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\SberController.cs:line 91
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2022-11-29 16:32:07.140 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Sber/order/new application/json 3637 - 500 - - 12334.8593ms
2022-11-29 16:39:11.931 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:39:12.343 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 416.7258ms
2022-11-29 16:39:12.371 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:39:12.371 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:39:12.391 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 14.2470ms
2022-11-29 16:39:12.457 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 86.0320ms
2022-11-29 16:39:12.550 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:39:12.895 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 345.2762ms
2022-11-29 16:39:29.638 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/status application/json 1811
2022-11-29 16:39:29.844 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "1811"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "d450ab5d-2b83-4cb3-981d-3a92c6bbf608"
  ]
}
2022-11-29 16:39:29.854 +04:00 [INF] Body: { "order": { "businessId": 1171248, "id": 160208406, "fake": false, "currency": "RUR", "paymentType": "PREPAID", "paymentMethod": "YANDEX", "status": "CANCELLED", "substatus": "CANCELLED", "creationDate": "25-04-2022 11:26:04", "itemsTotal": 14596, "total": 14645, "subsidyTotal": 0, "totalWithSubsidy": 14645, "taxSystem": "OSN", "delivery": { "type": "DELIVERY", "price": 49, "vat": "VAT_20_120", "serviceName": "Доставка", "deliveryServiceId": 1005522, "deliveryPartnerType": "YANDEX_MARKET", "dispatchType": "UNKNOWN", "dates": { "fromDate": "30-04-2022", "toDate": "30-04-2022", "fromTime": "09:00", "toTime": "22:00" }, "region": { "id": 20264, "name": "Динская", "type": "VILLAGE", "parent": { "id": 176069, "name": "Динское сельское поселение", "type": "SETTLEMENT", "parent": { "id": 99273, "name": "Динской район", "type": "SUBJECT_FEDERATION_DISTRICT", "parent": { "id": 10995, "name": "Краснодарский край", "type": "SUBJECT_FEDERATION", "parent": { "id": 26, "name": "Южный федеральный округ", "type": "COUNTRY_DISTRICT", "parent": { "id": 225, "name": "Россия", "type": "COUNTRY" } } } } } }, "shipments": [ { "id": 102511399, "shipmentDate": "26-04-2022", "weight": 11860, "width": 32, "height": 47, "depth": 58, "status": "NEW", "boxes": [] } ] }, "items": [ { "id": 172709135, "feedId": 1131917, "offerId": "D00066003", "feedCategoryId": "1319175810", "offerName": "Электрический культиватор CHAMPION EC1500", "price": 14596, "buyer-price": 14596, "subsidy": 0, "count": 1, "params": "", "vat": "VAT_20_120", "fulfilmentShopId": 1220278, "sku": "101644375073", "shopSku": "D00066003", "warehouseId": 126139, "partnerWarehouseId": "ce8488b8-cd6b-43b8-9b1a-b9fdd880c5ce" } ] } }
2022-11-29 16:39:29.857 +04:00 [INF] Host: localhost
2022-11-29 16:39:29.862 +04:00 [INF] Client IP: ::1
2022-11-29 16:39:29.876 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderChangeStatus (Market)'
2022-11-29 16:39:29.910 +04:00 [INF] Route matched with {action = "OrderChangeStatus", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] OrderChangeStatus(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 16:39:39.069 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-11-29 16:39:39.082 +04:00 [INF] Executed action Market.Controllers.YandexController.OrderChangeStatus (Market) in 9163.7804ms
2022-11-29 16:39:39.087 +04:00 [INF] Executed endpoint 'Market.Controllers.YandexController.OrderChangeStatus (Market)'
2022-11-29 16:39:39.090 +04:00 [INF] 200: 
2022-11-29 16:39:39.094 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Yandex/order/status application/json 1811 - 200 - - 9455.8644ms
2022-11-29 16:41:22.562 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:41:22.985 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 426.8779ms
2022-11-29 16:41:23.015 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:41:23.015 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:41:23.046 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 25.3230ms
2022-11-29 16:41:23.111 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 95.3248ms
2022-11-29 16:41:23.196 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:41:23.535 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 339.4883ms
2022-11-29 16:42:24.465 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3144
2022-11-29 16:42:24.703 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3144"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "802af807-5832-4d57-bbfd-735a52788f38"
  ]
}
2022-11-29 16:42:24.713 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"443030303534313838","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 16:42:24.715 +04:00 [INF] Host: localhost
2022-11-29 16:42:24.720 +04:00 [INF] Client IP: ::1
2022-11-29 16:42:24.732 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 16:42:24.781 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 16:45:07.937 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:45:08.364 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 431.1379ms
2022-11-29 16:45:08.426 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:45:08.426 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:45:08.447 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 19.1933ms
2022-11-29 16:45:08.517 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 88.5538ms
2022-11-29 16:45:08.598 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:45:08.934 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 336.2711ms
2022-11-29 16:45:14.324 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3144
2022-11-29 16:45:14.515 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3144"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "c8728523-ddcb-4718-9cc9-a850c45dfcc9"
  ]
}
2022-11-29 16:45:14.524 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"443030303534313838","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 16:45:14.527 +04:00 [INF] Host: localhost
2022-11-29 16:45:14.530 +04:00 [INF] Client IP: ::1
2022-11-29 16:45:14.543 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 16:45:14.577 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 16:46:40.093 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:46:40.581 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 493.8637ms
2022-11-29 16:46:40.611 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:46:40.611 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:46:40.632 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 17.4643ms
2022-11-29 16:46:40.709 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 98.3648ms
2022-11-29 16:46:40.785 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:46:41.110 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 325.1138ms
2022-11-29 16:46:47.688 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3144
2022-11-29 16:46:47.882 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3144"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "1ce922a8-0500-43dd-bfdd-5697242ca59f"
  ]
}
2022-11-29 16:46:47.892 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"443030303534313838","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 16:46:47.894 +04:00 [INF] Host: localhost
2022-11-29 16:46:47.899 +04:00 [INF] Client IP: ::1
2022-11-29 16:46:47.912 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 16:46:47.948 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 16:48:11.948 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:48:12.363 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 420.4328ms
2022-11-29 16:48:12.391 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:48:12.391 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:48:12.416 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 18.6338ms
2022-11-29 16:48:12.490 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 98.7605ms
2022-11-29 16:48:12.571 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:48:12.917 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 345.9317ms
2022-11-29 16:48:18.628 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3144
2022-11-29 16:48:18.863 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3144"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "23a35229-3ef0-46c6-ba1e-55fb03ca1517"
  ]
}
2022-11-29 16:48:18.871 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"443030303534313838","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 16:48:18.873 +04:00 [INF] Host: localhost
2022-11-29 16:48:18.877 +04:00 [INF] Client IP: ::1
2022-11-29 16:48:18.889 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 16:48:18.922 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 16:52:24.914 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 16:52:25.328 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 418.5716ms
2022-11-29 16:52:25.350 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 16:52:25.358 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 16:52:25.375 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 18.2435ms
2022-11-29 16:52:25.453 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 103.5304ms
2022-11-29 16:52:25.543 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 16:52:25.892 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 348.4776ms
2022-11-29 16:52:37.847 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 16:52:38.046 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "0800d244-b407-413f-9b12-cc62e5a95949"
  ]
}
2022-11-29 16:52:38.054 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 16:52:38.057 +04:00 [INF] Host: localhost
2022-11-29 16:52:38.061 +04:00 [INF] Client IP: ::1
2022-11-29 16:52:38.074 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 16:52:38.109 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 16:55:15.137 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 17:16:11.588 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 17:16:12.062 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 479.3603ms
2022-11-29 17:16:12.144 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 17:16:12.146 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 17:16:12.156 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 11.4578ms
2022-11-29 17:16:12.248 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 102.4527ms
2022-11-29 17:16:12.349 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 17:16:12.763 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 414.2695ms
2022-11-29 17:16:28.071 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 17:16:28.284 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "80219a28-21c6-4bf5-8401-e3de23dcecc3"
  ]
}
2022-11-29 17:16:28.294 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 17:16:28.297 +04:00 [INF] Host: localhost
2022-11-29 17:16:28.302 +04:00 [INF] Client IP: ::1
2022-11-29 17:16:28.314 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 17:16:28.348 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 17:17:25.611 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 17:18:01.750 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 17:18:38.071 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 17:19:15.216 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 17:27:37.783 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 17:27:38.914 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 17:27:38.919 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 1145.5836ms
2022-11-29 17:27:38.942 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 27.7122ms
2022-11-29 17:27:39.092 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 17:27:39.214 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 118.1924ms
2022-11-29 17:27:39.304 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 17:27:39.694 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 390.0597ms
2022-11-29 17:27:43.376 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 17:27:43.619 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "f9c44f94-3018-415b-b72a-96ccccae03b5"
  ]
}
2022-11-29 17:27:43.628 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 17:27:43.631 +04:00 [INF] Host: localhost
2022-11-29 17:27:43.636 +04:00 [INF] Client IP: ::1
2022-11-29 17:27:43.651 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 17:27:43.691 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 17:31:42.201 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 17:31:42.680 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 483.7447ms
2022-11-29 17:31:42.727 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 17:31:42.727 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 17:31:42.757 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 24.0082ms
2022-11-29 17:31:42.839 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 112.4158ms
2022-11-29 17:31:43.058 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 17:31:43.486 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 427.6228ms
2022-11-29 17:31:45.925 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 17:31:46.129 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "a8be0dd7-cfa0-42f8-bddd-8c5117dc807d"
  ]
}
2022-11-29 17:31:46.138 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 17:31:46.141 +04:00 [INF] Host: localhost
2022-11-29 17:31:46.146 +04:00 [INF] Client IP: ::1
2022-11-29 17:31:46.161 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 17:31:46.205 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 17:59:17.668 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 17:59:18.120 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 458.4611ms
2022-11-29 17:59:18.168 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 17:59:18.169 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 17:59:18.202 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 24.2793ms
2022-11-29 17:59:18.284 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 115.6069ms
2022-11-29 17:59:18.377 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 17:59:18.751 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 374.4947ms
2022-11-29 17:59:22.519 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 17:59:22.718 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "617a4963-6cb3-4674-a9b6-390ed8ffc353"
  ]
}
2022-11-29 17:59:22.726 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 17:59:22.729 +04:00 [INF] Host: localhost
2022-11-29 17:59:22.734 +04:00 [INF] Client IP: ::1
2022-11-29 17:59:22.747 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 17:59:22.780 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 18:00:29.760 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:01:15.076 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:01:50.927 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:02:27.238 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:03:03.521 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:03:24.877 +04:00 [INF] Executed action Market.Controllers.YandexController.OrderAccept (Market) in 242086.9978ms
2022-11-29 18:03:25.030 +04:00 [INF] Executed endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:03:25.491 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\Users\Валентин\source\repos\StinWeb\Market\bin\Debug\net6.0\error_offers\Yandex.txt'.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.File.Create(String path)
   at Market.Controllers.YandexController.OrderAccept(HeadersParameters headers, RequestedOrder requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\YandexController.cs:line 202
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 18:03:25.844 +04:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 18:03:26.157 +04:00 [ERR] Connection ID "18302628887244308670", Request ID "800000bf-0000-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\Users\Валентин\source\repos\StinWeb\Market\bin\Debug\net6.0\error_offers\Yandex.txt'.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.File.Create(String path)
   at Market.Controllers.YandexController.OrderAccept(HeadersParameters headers, RequestedOrder requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\YandexController.cs:line 202
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2022-11-29 18:03:26.183 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135 - 500 - - 243665.3303ms
2022-11-29 18:07:14.769 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 18:07:15.219 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 454.3817ms
2022-11-29 18:07:15.248 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 18:07:15.248 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 18:07:15.274 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 19.1066ms
2022-11-29 18:07:15.345 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 97.1350ms
2022-11-29 18:07:15.448 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 18:07:15.827 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 379.1878ms
2022-11-29 18:07:29.073 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 18:07:29.347 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "f26e565f-68cb-415a-926c-4cec619ddaed"
  ]
}
2022-11-29 18:07:29.357 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 18:07:29.359 +04:00 [INF] Host: localhost
2022-11-29 18:07:29.364 +04:00 [INF] Client IP: ::1
2022-11-29 18:07:29.379 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:07:29.418 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 18:08:27.544 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:09:03.547 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:09:39.387 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:10:15.387 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:10:51.057 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:11:00.306 +04:00 [INF] Executed action Market.Controllers.YandexController.OrderAccept (Market) in 210880.0813ms
2022-11-29 18:11:00.457 +04:00 [INF] Executed endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:11:00.972 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException: The process cannot access the file 'C:\Users\Валентин\source\repos\StinWeb\Market\bin\Debug\net6.0\error_offers\Yandex.txt' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.File.AsyncStreamReader(String path, Encoding encoding)
   at System.IO.File.InternalReadAllLinesAsync(String path, Encoding encoding, CancellationToken cancellationToken)
   at Market.Controllers.YandexController.OrderAccept(HeadersParameters headers, RequestedOrder requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\YandexController.cs:line 205
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 18:11:01.283 +04:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 18:11:01.580 +04:00 [ERR] Connection ID "17942340934234538671", Request ID "800002b0-0004-f900-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.IO.IOException: The process cannot access the file 'C:\Users\Валентин\source\repos\StinWeb\Market\bin\Debug\net6.0\error_offers\Yandex.txt' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.File.AsyncStreamReader(String path, Encoding encoding)
   at System.IO.File.InternalReadAllLinesAsync(String path, Encoding encoding, CancellationToken cancellationToken)
   at Market.Controllers.YandexController.OrderAccept(HeadersParameters headers, RequestedOrder requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\YandexController.cs:line 205
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2022-11-29 18:11:01.593 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135 - 500 - - 212521.0371ms
2022-11-29 18:14:27.258 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 18:14:27.778 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 526.5623ms
2022-11-29 18:14:27.817 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 18:14:27.817 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 18:14:27.836 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 18.0705ms
2022-11-29 18:14:27.965 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 148.0277ms
2022-11-29 18:14:28.076 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 18:14:28.530 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 453.8397ms
2022-11-29 18:14:37.798 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 18:14:38.031 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "e45e0351-cdd3-4492-b060-a8e4e32955fc"
  ]
}
2022-11-29 18:14:38.039 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 18:14:38.042 +04:00 [INF] Host: localhost
2022-11-29 18:14:38.046 +04:00 [INF] Client IP: ::1
2022-11-29 18:14:38.058 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:14:38.092 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 18:15:32.957 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:15:58.247 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 210
2022-11-29 18:15:58.260 +04:00 [INF] Executed action Market.Controllers.YandexController.OrderAccept (Market) in 80161.541ms
2022-11-29 18:15:58.265 +04:00 [INF] Executed endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:15:58.269 +04:00 [INF] 210: 
2022-11-29 18:15:58.275 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135 - 210 - - 80477.5081ms
2022-11-29 18:17:19.872 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/index.html - -
2022-11-29 18:17:20.352 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/index.html - - - 200 - text/html;charset=utf-8 491.6439ms
2022-11-29 18:17:20.394 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_vs/browserLink - -
2022-11-29 18:17:20.395 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - -
2022-11-29 18:17:20.424 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_framework/aspnetcore-browser-refresh.js - - - 200 11982 application/javascript;+charset=utf-8 21.1720ms
2022-11-29 18:17:20.507 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 118.1276ms
2022-11-29 18:17:20.591 +04:00 [INF] Request starting HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - -
2022-11-29 18:17:20.969 +04:00 [INF] Request finished HTTP/2 GET https://localhost:44373/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 378.2453ms
2022-11-29 18:17:25.507 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135
2022-11-29 18:17:25.699 +04:00 [INF] Header: {
  "Accept": [
    "*/*"
  ],
  "Accept-Encoding": [
    "gzip, deflate, br"
  ],
  "Authorization": [
    "41000001667F97FE"
  ],
  "Cache-Control": [
    "no-cache"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Length": [
    "3135"
  ],
  "Content-Type": [
    "application/json"
  ],
  "Host": [
    "localhost:44373"
  ],
  "User-Agent": [
    "PostmanRuntime/7.29.2"
  ],
  "Postman-Token": [
    "3327dff1-a3b3-44b0-a0e8-a94c99713d71"
  ]
}
2022-11-29 18:17:25.708 +04:00 [INF] Body: {
    "order":
    {
        "businessId":3298840,
        "id":153271008,
        "fake":false,
        "currency":"RUR",
        "paymentType":"PREPAID",
        "paymentMethod":"YANDEX",
        "itemsTotal":1274,
        "total":1274,
        "subsidyTotal":140,
        "totalWithSubsidy":1414,
        "buyerItemsTotalBeforeDiscount":1414,
        "buyerTotalBeforeDiscount":1414,
        "buyerItemsTotal":1274,
        "buyerTotal":1274,
        "taxSystem":"USN_MINUS_COST",
        "delivery":
        {
            "type":"PICKUP",
            "price":0,
            "serviceName":"Самовывоз",
            "deliveryServiceId":93808,
            "deliveryPartnerType":"YANDEX_MARKET",
            "dispatchType":"UNKNOWN",
            "dates":
            {
                "fromDate":"19-11-2022",
                "toDate":"19-11-2022",
                "fromTime":"09:00",
                "toTime":"15:00"
            },
            "region":
            {
                "id":54,
                "name":"Екатеринбург",
                "type":"CITY",
                "parent":
                {
                    "id":121110,
                    "name":"Муниципальное образование Екатеринбург",
                    "type":"SUBJECT_FEDERATION_DISTRICT",
                    "parent":
                    {
                        "id":11162,
                        "name":"Свердловская область",
                        "type":"SUBJECT_FEDERATION",
                        "parent":
                        {
                            "id":52,
                            "name":"Уральский федеральный округ",
                            "type":"COUNTRY_DISTRICT",
                            "parent":
                            {
                                "id":225,
                                "name":"Россия",
                                "type":"COUNTRY"
                            }
                        }
                    }
                }
            },
            "shipments":
            [
                {
                    "id":148534461,
                    "shipmentDate":"14-11-2022",
                    "weight":1500,
                    "width":21,
                    "height":22,
                    "depth":13,
                    "status":"NEW"
                }]
        },"buyer":{"type":"PERSON"},"items":[{"id":229387560,"feedId":3504586,"offerId":"D00027999","feedCategoryId":"1657868757","offerName":"Оголовок скважинный герметичный ОГ 148-160/32 пластик","price":1274,"buyer-price":1274,"buyerPrice":1274,"buyerPriceBeforeDiscount":1414,"subsidy":140,"count":1,"params":"","vat":"NO_VAT","fulfilmentShopId":3697174,"sku":"101381726757","shopSku":"443030303534313838","warehouseId":170165,"partnerWarehouseId":"56b3e377-3d8c-4f41-a644-a5c5a846a5de","promos":[{"type":"MARKET_PROMOCODE","subsidy":140,"marketPromoId":"m61IQopO-XNOahoZbflGyg"}]}]}
2022-11-29 18:17:25.711 +04:00 [INF] Host: localhost
2022-11-29 18:17:25.715 +04:00 [INF] Client IP: ::1
2022-11-29 18:17:25.730 +04:00 [INF] Executing endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:17:25.765 +04:00 [INF] Route matched with {action = "OrderAccept", controller = "Yandex"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[YandexClasses.ResponseOrder]] OrderAccept(Market.Services.HeadersParameters, YandexClasses.RequestedOrder, System.Threading.CancellationToken) on controller Market.Controllers.YandexController (Market).
2022-11-29 18:18:18.399 +04:00 [ERR] Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
Operation cancelled by user.
2022-11-29 18:18:26.633 +04:00 [INF] Executed action Market.Controllers.YandexController.OrderAccept (Market) in 60858.8194ms
2022-11-29 18:18:26.793 +04:00 [INF] Executed endpoint 'Market.Controllers.YandexController.OrderAccept (Market)'
2022-11-29 18:18:27.338 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException: The process cannot access the file 'C:\Users\Валентин\source\repos\StinWeb\Market\bin\Debug\net6.0\error_offers\Yandex.txt' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.StreamReader.ValidateArgsAndOpenPath(String path, Encoding encoding, Int32 bufferSize)
   at System.IO.File.InternalReadAllLines(String path, Encoding encoding)
   at System.IO.File.ReadAllLines(String path)
   at Market.Controllers.YandexController.OrderAccept(HeadersParameters headers, RequestedOrder requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\YandexController.cs:line 205
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 18:18:27.651 +04:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.IO.Pipelines.StreamPipeWriter.FlushAsyncInternal(Boolean writeToStream, ReadOnlyMemory`1 data, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-11-29 18:18:27.948 +04:00 [ERR] Connection ID "18302628904424178122", Request ID "800001cb-0004-fe00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.IO.IOException: The process cannot access the file 'C:\Users\Валентин\source\repos\StinWeb\Market\bin\Debug\net6.0\error_offers\Yandex.txt' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategy(FileStream fileStream, String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.StreamReader.ValidateArgsAndOpenPath(String path, Encoding encoding, Int32 bufferSize)
   at System.IO.File.InternalReadAllLines(String path, Encoding encoding)
   at System.IO.File.ReadAllLines(String path)
   at Market.Controllers.YandexController.OrderAccept(HeadersParameters headers, RequestedOrder requestedOrder, CancellationToken cancellationToken) in C:\Users\Валентин\source\repos\StinWeb\Market\Controllers\YandexController.cs:line 205
   at lambda_method7(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Market.AuthenticationMiddleware.Invoke(HttpContext context) in C:\Users\Валентин\source\repos\StinWeb\Market\AuthenticationMiddleware.cs:line 82
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2022-11-29 18:18:27.960 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:44373/Yandex/order/accept application/json 3135 - 500 - - 62453.6281ms
