#pragma checksum "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8c29d0486b2d960008e5dd4138f7c9369dee85c3"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Отчеты_ЖурналДоставки), @"mvc.1.0.view", @"/Views/Отчеты/ЖурналДоставки.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\_ViewImports.cshtml"
using StinWeb;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\_ViewImports.cshtml"
using NonFactors.Mvc.Grid;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\_ViewImports.cshtml"
using NonFactors.Mvc.Lookup;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\_ViewImports.cshtml"
using StinWeb.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"8c29d0486b2d960008e5dd4138f7c9369dee85c3", @"/Views/Отчеты/ЖурналДоставки.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"303b915066d1efa5c78241ff8833664880cca93b", @"/Views/_ViewImports.cshtml")]
    public class Views_Отчеты_ЖурналДоставки : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 2 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml"
  
    ViewBag.Title = "Журнал \"Доставка\"";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"<div class=""card border-round"" style=""background-color: lightgray;"">
    <div class=""card-body"">
        <div class=""float-left input-group input-group-sm col-6"">
            <div class=""input-group-prepend"">
                <span class=""input-group-text"">На склад</span>
            </div>
            ");
#nullable restore
#line 11 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml"
       Write(Html.DropDownList("склады", (SelectList)ViewBag.Склады, new { id = "выбСклад", @class = "form-control" }));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
        </div>
        <div class=""float-right"">
            <div class=""custom-control custom-radio"">
                <input type=""radio"" id=""общий"" name=""режим"" value=""0"" class=""custom-control-input"" checked>
                <label class=""custom-control-label"" for=""общий"">Общий</label>
            </div>
            <div class=""custom-control custom-radio"">
                <input type=""radio"" id=""поМастерской"" name=""режим"" value=""1"" class=""custom-control-input"">
                <label class=""custom-control-label"" for=""поМастерской"">По мастерской</label>
            </div>
            <div class=""custom-control custom-radio"">
                <input type=""radio"" id=""поТовару"" name=""режим"" value=""2"" class=""custom-control-input"">
                <label class=""custom-control-label"" for=""поТовару"">По товару</label>
            </div>
        </div>
    </div>
</div>

<ul id=""div-popover"" style=""display:none"">
    ");
#nullable restore
#line 31 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml"
Write(Html.Hidden("idDoc", ""));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n    <li><a id=\"опцияПросмотр\" href=\"#\">Просмотр документа</a></li>\r\n    <li><a id=\"опцияВводНаОсновании\" href=\"#\">Ввести на основании</a></li>\r\n</ul>\r\n\r\n");
#nullable restore
#line 36 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml"
Write(Html.AjaxGrid(Url.Action("Сформировать", "ЖурналДоставки", new { складId = (ViewBag.Склады as SelectList).SelectedValue.ToString() })));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n\r\n");
#nullable restore
#line 39 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml"
Write(Html.Hidden("идентификаторДокумента", "", new { id = "идентификаторДокумента" }));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 40 "C:\Users\Валентин\source\repos\StinWeb\StinWeb\Views\Отчеты\ЖурналДоставки.cshtml"
Write(Html.Hidden("видДокумента", "", new { id = "видДокумента", option = "" }));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

<div id=""docContent""></div>

<script>

    var insidePopover = false;

    function attachEvents(tr) {
        $('.popover').on('mouseenter', function () {
            insidePopover = true;
        });
        $('.popover').on('mouseleave', function () {
            insidePopover = false;
            $(tr).popover('hide');
        });
    }

    //$('table').on('mouseenter', 'tr', function () {
    //    var tr = $(this);
    //    setTimeout(function () {
    //        if (!insidePopover) {

    //            $(tr).popover('show');
    //            attachEvents(tr);
    //        }
    //    }, 200);
    //});

    $(document).on('mouseleave', 'tr', function () {
        $(this).find('td').each(function () {
            var popoverId = $(this).attr('aria-describedby');
            if (popoverId != undefined && popoverId.startsWith('popover')) {
                var td = $(this);
                setTimeout(function () {
                    if (!insidePopover) td.popover('h");
            WriteLiteral(@"ide');
                }, 200);
            }
        });
    });

    function TablePopover(element, idDoc) {
        if ($(element).attr('havePopover') != 'true') {
            $(element).attr('havePopover', 'true');
            $(element).popover({
                html: true,
                trigger: ""manual"",
                placement: ""bottom"",
                container: element,
                content: function () {
                    $(""#idDoc"").val(idDoc);
                    return $(""#div-popover"").html();
                }
            });
            $(element).on('shown.bs.popover', function () {
                var popoverIdDoc = $('#idDoc').val();
                $(""#идентификаторДокумента"").val(popoverIdDoc);
                $('#опцияПросмотр').click(function () {
                    $(element).popover('hide');
                    ПолучитьВидДокумента10(""Просмотр"");
                });
                $('#опцияВводНаОсновании').click(function () {
                  ");
            WriteLiteral(@"  $(element).popover('hide');
                    ПолучитьВидДокумента10(""ВводНаОсновании"");
                    });
            });
            $(element).on('hidden.bs.popover', function () {
                insidePopover = false;
            });
        }
        setTimeout(function () {
            if (!insidePopover) {
                $(element).popover('show');
                attachEvents(element);
            }
        }, 200);
    }

    $(function () {
        setInterval(function () {
            if (!$('body').find('.modal.show').length && !$('body').find('.popover.show').length) {
                const gridЖурнал = new MvcGrid(document.querySelector(""div[data-name='gridЖурналДоставки']""));
                gridЖурнал.reload();
            }
        }, refreshTimeout);
    });

    document.addEventListener(""rowdblclick"", e => {
        if (e.detail.grid.name == ""gridЖурналДоставки"") {
            TablePopover(e.detail.originalEvent.target, e.detail.data[""IdDoc""]);
     ");
            WriteLiteral(@"   }
    });

    function ПолучитьВидДокумента10(option) {
        var id = $(""#идентификаторДокумента"").val();
        if (id != undefined) {
            $.ajax({
                url: ""ПолучитьОбщиеПараметрыДокумента"",
                type: ""post"",
                datatype: ""xml"",
                data: {
                    IdDoc: id
                },
                async: true,
                cache: false,
                success: function (obj) {
                    if (obj) {  // check if data is defined
                        $(""#видДокумента"").val(obj.видДокумента10);
                        $(""#видДокумента"").attr(""option"", option);
                        $(""#видДокумента"").trigger(""change"");
                    }
                },
                error: function (e, v, f) {
                    alert(""ошибка выполнения!"");
                }
            });
        }
    }

    $(""#выбСклад"").on(""change"", function () {
        const gridЖурнал = new MvcGrid(document.");
            WriteLiteral(@"querySelector(""div[data-name='gridЖурналДоставки']""));
        gridЖурнал.url.searchParams.set(""складId"", $(""#выбСклад"").val());
        gridЖурнал.reload();
    });
    $('input[type=radio][name=режим]').change(function () {
        const gridЖурнал = new MvcGrid(document.querySelector(""div[data-name='gridЖурналДоставки']""));
        gridЖурнал.url.searchParams.set(""режим"", this.value);
        gridЖурнал.reload();
    });
    $(""#видДокумента"").on(""change"", function () {
        var ДокId = $(""#идентификаторДокумента"").val();
        var ВидДок = $(""#видДокумента"").val();
        var ДокОснованиеId = """";
        var ВидДокОснование = ""0"";
        var option = $(""#формаДокумента"").attr(""option"");
        if (option == ""Просмотр"") {

        } else { //Ввод на основании
            if (ВидДок == ""10080"") {
                //ПеремещениеИзделий
                ВидДокОснование = ВидДок;
                ДокОснованиеId = $(""#идентификаторДокумента"").val();
                ВидДок = ""9899"";
  ");
            WriteLiteral(@"              ДокId = """";
            }
        }
        EnableBusyScreen();
        $.ajax({
            url: ""ПолучитьФормуДокумента"",
            type: ""post"",
            datatype: ""xml"",
            data: {
                родитель: ""gridЖурналДоставки"",
                просмотр: option == ""Просмотр"",
                idDoc: ДокId,
                видДок: ВидДок,
                докОснованиеId: ДокОснованиеId,
                видДокОснование: ВидДокОснование
            },
            async: true,
            cache: false,
            success: function (obj) {
                if (obj) {  // check if data is defined
                    $(""#docContent"").html(obj);
                    $(""#выбДокумент"").modal(""show"");
                }
                DisableBusyScreen();
            },
            error: function (e, v, f) {
                alert(""ошибка выполнения!"");
            }
        });
    });

</script>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
